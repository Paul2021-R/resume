## 🌐 NetPractice: 네트워크의 법칙을 설계하다 - OSI 3계층 탐험기

**NetPractice**는 분리된 기계들이 어떻게 서로를 인식하고 데이터를 주고받는지에 대한 '통신의 법칙'을 직접 설계하는 과제다. 쉬운 말로 푼다면, 네트워크 망의 형태를 구축해주고, 기계들이 인식하게 직접 설정해보는 것이 핵심 목표인 미니 프로젝트이다.

이 프로젝트는 IP 주소, 서브넷 마스크, 라우팅이라는 개념을 통해, 복잡한 네트워크 스택 중 가장 핵심적인 **OSI 7계층의 3계층, 네트워크 계층(Network Layer)**의 동작 원리를 직관적으로 체득하게 하며, 원시적인 망 구축의 모방이라고 보면 되겠다.

NetPractice는 물리적인 케이블(1계층)이나 MAC 주소를 이용한 내부 통신(2계층)의 복잡성을 추상화하고, 오직 논리적인 주소(IP)와 경로 설정(Routing)만으로 전체 네트워크의 통신을 관장하게 하며, 이 과정에서 어떤 식으로 기계들이 서로를 인식하며, 서로를 부르는 방법이 뭔질 이해해야, 해당 프로젝트의 문제들을 풀고, 직접 IPv4 기반으로 어떤 기기에는 얼마나 주소를 할당 가능한지를 알 수 있는 그런 프로젝트라 할 수 있겠다.

---

### 📜 핵심 개념: 주소 체계와 경로 설정

성공적인 통신망을 구축하기 위해서는, 모든 장치가 고유한 **주소**를 가져야 하고, 한 주소에서 다른 주소로 가는 **경로**를 찾을 수 있어야 한다. NetPractice는 이 두 가지 원리를 중심으로 구성되어 있다.

우선 감사의 말씀을 전할 것은, 먼저 간 이들의 멋진 글들이(...) 교재가 되어 주어서, 일일히 찾거나 어디서부터 어디까지 공부 해야 하는지 등, 정말 많은 부분에서 해결이 쉬었다. ~~[대표적으로 이런 글들...](https://80000coding.oopy.io/9f9642d8-0281-40ef-901f-3d5b68d5eef4)~~

1.  **IP 주소 (Internet Protocol Address)**:
    네트워크 계층에서 각 장치(호스트, 라우터 인터페이스)를 식별하기 위한 32비트(IPv4 기준)의 논리적 주소이다. 이 주소는 단순히 장치를 식별하는 것을 넘어, '어떤 네트워크에 속해 있는지'에 대한 정보를 내포하고 있다.

2.  **서브넷 마스크 (Subnet Mask) 와 CIDR**:
    IP 주소의 가장 중요한 역할은 '네트워크 주소' 부분과 '호스트 주소' 부분을 구분하는 것이다.
    * **네트워크 주소**: 장치가 속한 '동네'를 나타낸다.
    * **호스트 주소**: '동네' 안에서 각 장치를 구분하는 '집 주소'에 해당한다.
    * **서브넷 마스크**는 이 두 부분을 구분하는 기준점이다. 컴퓨터는 자신의 IP 주소와 목적지 IP 주소를 각각 서브넷 마스크와 **비트 AND 연산**을 수행한다. 그 결과로 나온 네트워크 주소가 동일하면 '같은 네트워크'로 판단하고, 다르면 '다른 네트워크'로 판단한다.
        * ` (IP 주소) & (서브넷 마스크) = 네트워크 주소 `
    * **CIDR(Classless Inter-Domain Routing)** 표기법은 `/24` 와 같이 IP 주소 뒤에 슬래시와 숫자를 붙여 서브넷 마스크를 간결하게 표현하는 현대적인 방식이다. `/24`는 32비트 중 앞의 24비트가 네트워크 주소임을 의미한다.

3.  **게이트웨이 (Gateway) 와 라우팅 (Routing)**:
    '다른 네트워크'에 있는 목적지로 데이터를 보내기 위해서는 현재 네트워크의 '출입구' 역할을 하는 **게이트웨이**를 거쳐야 한다. 이 게이트웨이는 일반적으로 라우터가 담당한다.
    * **라우팅 테이블**: 라우터는 내부에 '라우팅 테이블'이라는 이정표를 가지고 있다. 이 테이블에는 `[목적지 네트워크 주소, 다음으로 넘길 라우터(Next Hop), 사용할 네트워크 인터페이스]` 정보가 기록되어 있다.
    * **라우팅 로직**: 패킷을 수신한 라우터는 패킷의 목적지 IP 주소를 자신의 라우팅 테이블과 비교하여, 가장 구체적인 경로(Longest Prefix Match)를 선택해 패킷을 다음 목적지로 전달(Forwarding)한다.
    * **기본 경로 (Default Route)**: 라우팅 테이블에 명시된 경로가 없을 경우를 대비한 '기본값' 경로이다. `0.0.0.0/0`으로 표기하며, "이 테이블에 없는 모든 목적지는 일단 이곳으로 보내라"는 의미를 가진다.

---

### 🚀 NetPractice 시뮬레이션: 이론의 실체화

NetPractice는 위의 개념을 기반으로, 주소 배치를 어떻게 하면 되고, 서브넷 마스크를 어떻게 설정하면 되는지를 문제로 만들었고, 각 레벨로 나누어 이러한 이론적 개념들을 실제 토폴로지에 적용하는 식으로 진행되었다.

* **초반 레벨 (동일 네트워크 통신)**:
    하나의 서브넷 안에 있는 호스트 간의 통신을 설정한다. 이 단계에서는 모든 장치가 동일한 네트워크 주소를 가지므로 게이트웨이나 라우팅이 필요 없다. IP 주소와 서브넷 마스크의 기본 개념을 확립하는 단계이다.

* **중반 레벨 (라우터를 통한 이종 네트워크 연결)**:
    라우터를 중심으로 둘 이상의 다른 서브넷이 연결된 구조가 등장한다. 이 단계의 핵심은 각 호스트에 **자신이 속한 네트워크의 출입구, 즉 게이트웨이의 IP 주소를 정확히 설정**해주는 것이다. 또한, 라우터에는 **자신이 직접 연결된 네트워크 외에 다른 네트워크로 가는 경로를 라우팅 테이블에 명시적**으로 추가해야 한다.

* **후반 레벨 (복잡한 토폴로지와 라우팅 경로 설계)**:
    여러 개의 라우터가 서로 연결된 복잡한 인터넷 구조를 모방한다. 패킷이 목적지까지 여러 라우터(홉, Hop)를 거쳐야 한다. 이 단계에서는 특정 라우터가 직접 연결되지 않은 '멀리 떨어진' 네트워크까지 도달할 수 있도록, **모든 라우터에 전체 네트워크 구성을 고려한 라우팅 정보를 연쇄적으로 설정**해야 한다. A 라우터는 B로 가는 길을 알아야 하고, B 라우터는 C로 가는 길을 알아야만 A에서 C로의 최종 통신이 가능해진다.

---

### ✨ 성찰 및 배운 점

NetPractice는 추상적인 네트워크 이론에 구체적인 형태와 감각을 부여하는 과제였다.

* **네트워크 3계층에 대한 직관적 이해**: 패킷이 라우터를 거칠 때마다 어떤 논리적 판단을 통해 경로가 결정되는지, 서브넷 마스크가 '우리 편'과 '남'을 구분하는 데 어떻게 사용되는지를 시뮬레이션을 통해 명확하게 이해하게 되었다.
* **추상화의 교훈**: 우리가 네트워크 통신을 할 때 당연하게 여겼던 모든 과정이, 실제로는 이처럼 잘 정의된 주소 체계와 라우팅 프로토콜이라는 약속 위에서 동작하고 있음을 깨달았다. 복잡한 하위 계층을 숨기고 핵심 논리에 집중하게 해주는 추상화의 중요성을 다시 한번 느꼈다.
* **논리적 디버깅 능력**: 'KO' 사인이 떴을 때, 패킷의 출발지부터 목적지까지의 경로를 머릿속으로 따라가며 어느 지점의 IP, 서브넷 마스크, 또는 라우팅 테이블 설정이 잘못되었는지를 논리적으로 추론하고 가설을 세워 수정하는 과정은, 네트워크 문제 해결의 축소판과도 같았다. 어렵게 이야기 하긴 했지만, 약간 인터넷 공유기, 라우터가 이런 거구나 라고 공감(?)을 가지게 되는 그런 과제였다.
